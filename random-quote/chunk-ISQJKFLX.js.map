{
  "version": 3,
  "sources": ["src/app/shared/component/loading/loading.component.ts", "src/app/shared/component/loading/loading.component.html", "src/app/shared/services/quotes.service.ts", "src/app/features/quotes-container/quotes-container.component.ts", "src/app/features/quotes-container/quotes-container.component.html"],
  "sourcesContent": ["import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-loading',\r\n  standalone: true,\r\n  imports: [],\r\n  templateUrl: './loading.component.html',\r\n  styleUrl: './loading.component.less'\r\n})\r\nexport class LoadingComponent {\r\n\r\n}\r\n", "<div id=\"loading\" class=\"flex justify-center items-start\">\r\n  <svg\r\n    class=\"animate-spin h-10 w-10 text-blue-500\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    fill=\"none\"\r\n    viewBox=\"0 0 24 24\"\r\n  >\r\n    <circle\r\n      class=\"opacity-25\"\r\n      cx=\"12\"\r\n      cy=\"12\"\r\n      r=\"10\"\r\n      stroke=\"currentColor\"\r\n      stroke-width=\"4\"\r\n    ></circle>\r\n    <path\r\n      class=\"opacity-75\"\r\n      fill=\"currentColor\"\r\n      d=\"M4 12a8 8 0 0116 0H4z\"\r\n    ></path>\r\n  </svg>\r\n</div>\r\n", "import { HttpClient } from '@angular/common/http';\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { API } from '../../app.config';\r\nimport { Observable, Subject, map, tap } from 'rxjs';\r\nimport { Branches, WebStorageService } from './webStorage.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class QuotesService {\r\n  // private quotes$: Subject<any> = new Subject<any>();\r\n  // messageQuote$: Observable<any> = this.quotes$.asObservable();\r\n\r\n  quotesArr: any[] = [];\r\n  constructor(\r\n    private http: HttpClient,\r\n    @Inject(API) private baseUrl: string,\r\n    private webStorageService: WebStorageService\r\n  ) {}\r\n\r\n  getBranchesSelected(): Branches {\r\n    return this.webStorageService.getBranches();\r\n  }\r\n  //to-do refractor get quotes\r\n  getQuote(numQuotes: number): Observable<any> {\r\n    return this.http\r\n      .post<any>(`${this.baseUrl}/quote`, {\r\n        branchesSelected: this.getBranchesSelected(),\r\n        numQuotes: numQuotes,\r\n      })\r\n      .pipe(\r\n        map((quote) => {\r\n          return quote;\r\n        })\r\n      );\r\n  }\r\n}\r\n", "import {\r\n  AfterViewInit,\r\n  CUSTOM_ELEMENTS_SCHEMA,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\n\r\nimport { Observable, map, tap } from 'rxjs';\r\nimport { QuotesService } from '../../shared/services/quotes.service';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SwiperContainer } from 'swiper/element/bundle';\r\nimport { LoadingComponent } from '../../shared/component/loading/loading.component';\r\nimport { SvgQuoteComponent } from '../../shared/component/svg-quote/svg-quote.component';\r\n\r\n@Component({\r\n  selector: 'app-quotes-container',\r\n  standalone: true,\r\n  imports: [CommonModule, LoadingComponent, SvgQuoteComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n  templateUrl: './quotes-container.component.html',\r\n  styleUrl: './quotes-container.component.less',\r\n})\r\nexport class QuotesContainerComponent implements OnInit, AfterViewInit {\r\n  // readonly quoteMessage$: Observable<any> = this.quotesService.messageQuote$;\r\n\r\n  @ViewChild('swiper') swiperRef!: ElementRef<SwiperContainer>;\r\n  isLoading: boolean = true;\r\n  isAddLoading: boolean = false;\r\n  showAddLoading: boolean = false;\r\n  readonly INIT_QUOTE_NUM = 4;\r\n  readonly ADD_QUOTE_NUM = 2;\r\n  readonly MAX_QUOTE_NUM = 20;\r\n\r\n  constructor(\r\n    private quotesService: QuotesService,\r\n    private cd: ChangeDetectorRef\r\n  ) {}\r\n  ngOnInit(): void {\r\n    //TO-DO servizio custom numero di quote iniziali\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.swiperRef.nativeElement.swiper.on('slideChange', (swiper) => {\r\n      if (swiper.activeIndex === swiper.slides.length - 1) {\r\n        this.additionalQuote();\r\n      }\r\n      if (swiper.activeIndex === swiper.slides.length - 2) {\r\n        this.showAddLoading = true;\r\n      }\r\n    });\r\n\r\n    this.initQuote();\r\n  }\r\n\r\n  initQuote() {\r\n    this.getQuote(this.INIT_QUOTE_NUM);\r\n  }\r\n\r\n  additionalQuote() {\r\n    this.isAddLoading = true;\r\n    this.getQuote(this.ADD_QUOTE_NUM);\r\n  }\r\n\r\n  handleCapSlide() {\r\n    if (\r\n      this.swiperRef.nativeElement.swiper.slides.length >= this.MAX_QUOTE_NUM\r\n    ) {\r\n      this.swiperRef.nativeElement.swiper.removeSlide([0, 1]);\r\n    }\r\n  }\r\n\r\n  //handle error\r\n  getQuote(numQuotes: number, isTryingAgain = false) {\r\n    this.quotesService.getQuote(numQuotes).subscribe((quotes) => {\r\n      quotes.forEach((quote: any) => {\r\n        try {\r\n          let quoteContent = JSON.parse(quote.content);\r\n          this.swiperRef.nativeElement.swiper.appendSlide(\r\n            `<swiper-slide>\r\n            <div id=\"quote-content\" class=\"card mx-2 text-white\">\r\n              <div class=\"card-body\">\r\n              <blockquote\r\n              class=\"max-w-4xl mx-auto p-6 text-center italic rounded-lg cursor-pointer \"\r\n            >\r\n\r\n              <p class=\"text-lg sm:text-lg md:text-2xl lg:text-3xl xl:text-4xl  \">\r\n              ${quoteContent.quote} \r\n              </p>\r\n                    <cite class=\"not-italic font-normal text-sm sm:text-md md:text-lg lg:text-xl xl:text-2xl\"\r\n                >~ ${quoteContent.exponent || quoteContent.character} ${\r\n              quoteContent.opera?.length > 0\r\n                ? ` from ${quoteContent.opera}`\r\n                : ``\r\n            } ~</cite>\r\n              \r\n            </blockquote>\r\n            \r\n              </div>\r\n            </div>\r\n          </swiper-slide>`\r\n          );\r\n          //<hr class=\"border-0 bg-gray-300 h-px w-1/6 \">\r\n        } catch (error) {\r\n          console.error(error);\r\n          if (!isTryingAgain) {\r\n            this.getQuote(1, true);\r\n          }\r\n        }\r\n      });\r\n      this.handleCapSlide();\r\n      this.isLoading = false;\r\n      this.isAddLoading = false;\r\n      this.showAddLoading = false;\r\n    });\r\n  }\r\n}\r\n", "<div class=\"pt-[15vh]\">\r\n  <div class=\" \">\r\n    <div class=\"text-center text-white mb-4\">\r\n      <app-svg-quote></app-svg-quote>\r\n    </div>\r\n\r\n    <div id=\"why-us-swiper\" class=\"px-2 px-md-5\">\r\n      @if(isLoading){\r\n      <app-loading></app-loading>\r\n      }\r\n      <swiper-container\r\n        #swiper\r\n        class=\"swiper\"\r\n        pagination=\"true\"\r\n        autoplay=\"false\"\r\n      >\r\n      </swiper-container>\r\n      @if(isAddLoading && showAddLoading){\r\n      <app-loading></app-loading>\r\n      }\r\n    </div>\r\n  </div>\r\n</div>\r\n"],
  "mappings": "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",
  "names": []
}
